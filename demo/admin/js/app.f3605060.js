(function(){"use strict";var t={1536:function(t,e,i){var s=i(9242),_=i(3396);function a(t,e,i,s,a,n){const o=(0,_.up)("router-view"),r=(0,_.up)("main-basket"),l=(0,_.up)("app-alert");return(0,_.wg)(),(0,_.iD)(_.HY,null,[(0,_.Wm)(o),((0,_.wg)(),(0,_.j4)(_.lR,{to:"body"},[(0,_.Wm)(r)])),(0,_.Wm)(l)],64)}var n=i(7139);const o={class:"sb-basket"},r={class:"sb-basket__inner"},l={class:"sb-basket__main-content"},u={class:"sb-basket__header"},c={class:"sb-basket__title"},d=(0,_._)("svg",{width:"30",height:"30",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},[(0,_._)("path",{d:"m7 7 18 18M7 25 25 7",fill:"none",stroke:"#f9f9f9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2px",class:"stroke-000000"})],-1),p=[d],m={key:0,class:"sb-basket__empty-section"},b=(0,_._)("svg",{class:"sb-basket__empty-img",viewBox:"0 0 576 512",xmlns:"http://www.w3.org/2000/svg"},[(0,_._)("path",{d:"m560 192-101.6.002-93.11-179.1c-6.062-11.72-20.61-16.37-32.36-10.22-11.78 6.094-16.34 20.59-10.22 32.34l81.61 156.9H171.7l81.61-156.9c6.09-11.702 1.59-26.2-10.21-32.294-11.8-6.125-26.3-1.5-32.4 10.222l-93.11 179.1L16 192c-8.836 0-16 7.164-16 15.1v32c0 8.836 7.164 15.1 16 15.1h23.11l45.75 205.9c6.51 31.1 32.44 51.9 62.44 51.9h281.3c29.1 0 55.97-20.83 62.48-50.12l45.75-205.9H560c8.838 0 16-7.164 16-15.1v-32c0-9.68-7.2-16.88-16-16.88zM192 432c0 8.834-7.166 15.1-16 15.1-8.832 0-16-7.166-16-15.1V304c0-8.834 7.168-15.1 16-15.1 8.834 0 16 7.166 16 15.1v128zm112 0c0 8.834-7.166 15.1-16 15.1-8.832 0-16-7.165-16-15.1V304c0-8.834 7.168-15.1 16-15.1 8.834 0 16 7.166 16 15.1v128zm112 0c0 8.834-7.166 15.1-16 15.1-8.832 0-16-7.166-16-15.1V304c0-8.834 7.168-15.1 16-15.1 8.834 0 16 7.166 16 15.1v128z",fill:"#0391fd",class:"fill-000000"})],-1),v=(0,_._)("div",{class:"sb-basket__empty-text"},"Корзина пуста",-1),h=[b,v],g={class:"sb-basket__form",id:"sb-basket__form",ref:"sb_basket_form",autocomplete:"off"},T=(0,_._)("input",{type:"hidden",name:"sv",value:""},null,-1),k=["value"],f={key:0,class:"sb-basket__footer"},y={class:"sb-basket__quantity"},A={key:0},E=["disabled"],w={key:0,class:"sb-basket__checkout-text"};function q(t,e,i,a,d,b){const v=(0,_.up)("min-basket-product-inputs"),q=(0,_.up)("min-basket-contact-inputs"),D=(0,_.up)("loader-dots");return(0,_.wy)(((0,_.wg)(),(0,_.iD)("div",o,[(0,_._)("div",r,[(0,_._)("div",l,[(0,_._)("div",u,[(0,_._)("div",c,[(0,_.wy)((0,_._)("span",null,"Всего товаров: "+(0,n.zw)(b.total_quantity),513),[[s.F8,!d.is_form_visible]]),(0,_.wy)((0,_._)("button",{class:"sb-basket__clear-button",onClick:e[0]||(e[0]=t=>b.clear_button())}," Очистить корзину ",512),[[s.F8,!d.is_form_visible]]),(0,_.wy)((0,_._)("button",{onClick:e[1]||(e[1]=t=>d.is_form_visible=!d.is_form_visible),class:"sb-basket__clear-button"}," Вернуться в корзину ",512),[[s.F8,d.is_form_visible]])]),(0,_._)("button",{class:"sb-basket__close-button",onClick:e[2]||(e[2]=(...t)=>b.close_sb_basket&&b.close_sb_basket(...t))},p)]),t.GET_BASKET_DATA.length?(0,_.kq)("",!0):((0,_.wg)(),(0,_.iD)("div",m,h)),(0,_._)("form",g,[T,(0,_.wy)((0,_._)("div",null,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(t.GET_BASKET_DATA,(t=>((0,_.wg)(),(0,_.j4)(v,{key:t.product_basket_id,product:t},null,8,["product"])))),128))],512),[[s.F8,!d.is_form_visible]]),(0,_.wy)((0,_._)("div",null,[(0,_.Wm)(q,{config:t.GET_CONFIG_LIST_DATA},null,8,["config"])],512),[[s.F8,d.is_form_visible]]),void 0!=t.GET_CONFIG_LIST_DATA?((0,_.wg)(),(0,_.iD)("input",{key:0,type:"hidden",name:"total_price",value:b.total_price},null,8,k)):(0,_.kq)("",!0)],512)]),b.total_quantity?((0,_.wg)(),(0,_.iD)("div",f,[(0,_.wy)((0,_._)("div",y,[(0,_.Uk)(" Общая стоимость: "),void 0!=t.GET_CONFIG_LIST_DATA?((0,_.wg)(),(0,_.iD)("span",A,(0,n.zw)(b.total_price)+" "+(0,n.zw)(t.GET_CONFIG_LIST_DATA.config_currency),1)):(0,_.kq)("",!0)],512),[[s.F8,!d.is_form_visible]]),(0,_.wy)((0,_._)("button",{class:"sb-basket__checkout",onClick:e[3]||(e[3]=t=>d.is_form_visible=!d.is_form_visible)}," Оформить заказ ",512),[[s.F8,!d.is_form_visible]]),(0,_.wy)((0,_._)("button",{class:"sb-basket__clear-button",onClick:e[4]||(e[4]=t=>d.is_form_visible=!d.is_form_visible)}," Вернуться в корзину ",512),[[s.F8,d.is_form_visible]]),(0,_.wy)((0,_._)("button",{type:"submit",form:"sb-basket__form",class:"sb-basket__checkout",onClick:e[5]||(e[5]=(0,s.iM)((t=>b.submit()),["prevent"])),disabled:d.is_checkout_disable},[d.is_loader_visible?(0,_.kq)("",!0):((0,_.wg)(),(0,_.iD)("span",w,"Подтвердить заказ")),d.is_loader_visible?((0,_.wg)(),(0,_.j4)(D,{key:1})):(0,_.kq)("",!0)],8,E),[[s.F8,d.is_form_visible]])])):(0,_.kq)("",!0)])],512)),[[s.F8,t.GET_BASKET_CONDITION]])}var D=i(70),S=i(65),I=i.p+"admin/img/trash.ee4dd000.svg",N=i.p+"admin/img/arrow.a7d65d3d.svg";const C={key:0,class:"sb-basket__form-item"},O={class:"sb-basket__item-title"},G={class:"sb-basket__item-img"},x=["alt","src"],L={class:"sb-basket__item-text-wrapper"},B={class:"sb-basket__item-name"},K={class:"sb-basket__item-price"},F={key:0},M=(0,_._)("img",{width:"12",height:"12",src:I,alt:"Увеличить количество"},null,-1),R=[M],z={key:1,class:"sb-basket__quantity-input"},j=(0,_._)("img",{width:"12",height:"12",src:N,alt:"Увеличить количество"},null,-1),$=[j],V=(0,_._)("img",{width:"12",height:"12",src:I,alt:"Увеличить количество"},null,-1),P=[V],Z={class:"sb-basket__quantity-number"},U=(0,_._)("img",{width:"12",height:"12",src:N,alt:"Уменьшить количество"},null,-1),H=[U],J=["name","value"],W=["name","value"],Y=["name","value"],Q=["name","value"],X=["name","value"],tt=["name","value"];function et(t,e,i,a,o,r){return t.GET_CONFIG_LIST_DATA?((0,_.wg)(),(0,_.iD)("div",C,[(0,_._)("div",O,[(0,_._)("div",G,[(0,_._)("img",{alt:i.product.product_name,src:r.img_path(i.product.product_img)},null,8,x)]),(0,_._)("div",L,[(0,_._)("div",B,(0,n.zw)(i.product.product_name),1),(0,_._)("div",K,[(0,_.Uk)((0,n.zw)(o.product_price)+" "+(0,n.zw)(t.GET_CONFIG_LIST_DATA.config_currency)+" ",1),o.product_price_old?((0,_.wg)(),(0,_.iD)("span",F,"/ "+(0,n.zw)(o.product_price_old)+" "+(0,n.zw)(t.GET_CONFIG_LIST_DATA.config_currency),1)):(0,_.kq)("",!0)])])]),1!==Number(i.product.product_is_quantity)?((0,_.wg)(),(0,_.iD)("button",{key:0,class:"sb-basket__quantity-button sb-basket__quantity-button_trash",onClick:e[0]||(e[0]=(0,s.iM)((t=>r.delete_product_from_basket(i.product.product_id)),["prevent"]))},R)):(0,_.kq)("",!0),1==Number(i.product.product_is_quantity)?((0,_.wg)(),(0,_.iD)("div",z,[this.quantity>1?((0,_.wg)(),(0,_.iD)("button",{key:0,class:"sb-basket__quantity-button sb-basket__quantity-button_plus",onClick:e[1]||(e[1]=(0,s.iM)((t=>r.change_quantity("-")),["prevent"]))},$)):((0,_.wg)(),(0,_.iD)("button",{key:1,class:"sb-basket__quantity-button sb-basket__quantity-button_trash",onClick:e[2]||(e[2]=(0,s.iM)((t=>r.delete_product_from_basket(i.product.product_id)),["prevent"]))},P)),(0,_._)("span",Z,(0,n.zw)(o.quantity),1),(0,_._)("button",{class:"sb-basket__quantity-button sb-basket__quantity-button_minus",onClick:e[3]||(e[3]=(0,s.iM)((t=>r.change_quantity("+")),["prevent"]))},H)])):(0,_.kq)("",!0),(0,_._)("input",{type:"hidden",name:"order["+i.product.product_id+"][id]",value:i.product.product_id},null,8,J),(0,_._)("input",{type:"hidden",name:"order["+i.product.product_id+"][img]",value:r.img_path(i.product.product_img)},null,8,W),(0,_._)("input",{type:"hidden",name:"order["+i.product.product_id+"][name]",value:i.product.product_name},null,8,Y),(0,_._)("input",{type:"hidden",name:"order["+i.product.product_id+"][price]",value:i.product.product_price},null,8,Q),(0,_._)("input",{type:"hidden",name:"order["+i.product.product_id+"][quantity]",value:o.quantity},null,8,X),(0,_._)("input",{type:"hidden",name:"order["+i.product.product_id+"][vendor_code]",value:i.product.product_vendor_code},null,8,tt)])):(0,_.kq)("",!0)}var it={props:{product:Object},data(){return{quantity:this.product.product_quantity,product_price:Math.floor(this.product.product_quantity*this.product.product_price*100)/100,product_price_old:Math.floor(this.product.product_quantity*this.product.product_price_old*100)/100}},computed:{...(0,S.Se)(["GET_BASKET_DATA","GET_CONFIG_LIST_DATA"])},methods:{change_quantity(t){"+"==t&&(this.quantity=this.quantity+1),"-"==t&&this.quantity>1&&(this.quantity=this.quantity-1),this.product_price=Math.floor(this.product.product_price*this.quantity*100)/100,this.product_price_old=Math.floor(this.product.product_price_old*this.quantity*100)/100;let e=this.GET_BASKET_DATA,i=e.findIndex((t=>t.product_id==this.product.product_id));console.log(i),e[i].product_quantity=this.quantity,e[i].product_basket_id=this.product.product_id+"_"+Math.random(1e3),this.$store.commit("SET_BASKET_DATA",e),localStorage.setItem("sb_ls",JSON.stringify(e))},delete_product_from_basket(t){let e=this.GET_BASKET_DATA,i=e.filter((e=>e.product_id!==t));console.log(t),console.log(i),this.$store.commit("SET_BASKET_DATA",i),localStorage.setItem("sb_ls",JSON.stringify(i))},img_path(t){return document.location.protocol+"//"+document.location.host+t}}},st=i(89);const _t=(0,st.Z)(it,[["render",et]]);var at=_t;const nt={key:0,class:"sb-basket__user-inputs"};function ot(t,e,i,s,a,n){const o=(0,_.up)("text-input"),r=(0,_.up)("tel-input"),l=(0,_.up)("text-area");return i.config?((0,_.wg)(),(0,_.iD)("div",nt,[n.isVisibleInput(i.config.config_is_name_active)?((0,_.wg)(),(0,_.j4)(o,{key:0,input_value:{placeholder:"Имя",name_val:"user_name",required_val:i.config.config_is_name_required>0,type_val:"text",minlength_val:2,maxlength_val:100}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_tel_active)?((0,_.wg)(),(0,_.j4)(r,{key:1,input_value:{placeholder:"Телефон",name_val:"user_tel",required_val:i.config.config_is_tel_required>0,minlength_val:17,mask:i.config.config_mask_tel}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_email_active)?((0,_.wg)(),(0,_.j4)(o,{key:2,input_value:{placeholder:"E-mail",name_val:"user_mail",required_val:i.config.config_is_email_required>0,type_val:"email",minlength_val:5,maxlength_val:60}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_city_active)?((0,_.wg)(),(0,_.j4)(o,{key:3,input_value:{placeholder:"Город",name_val:"user_city",required_val:i.config.config_is_city_required>0,type_val:"text",minlength_val:2,maxlength_val:50}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_street_active)?((0,_.wg)(),(0,_.j4)(o,{key:4,input_value:{placeholder:"Улица",name_val:"user_street",required_val:i.config.config_is_street_required>0,type_val:"text",minlength_val:2,maxlength_val:50}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_house_number_active)?((0,_.wg)(),(0,_.j4)(o,{key:5,input_value:{placeholder:"Номер дома",name_val:"user_house_number",required_val:i.config.config_is_house_number_required>0,type_val:"text",minlength_val:1,maxlength_val:7}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_apartment_number_active)?((0,_.wg)(),(0,_.j4)(o,{key:6,input_value:{placeholder:"Номер квартиры",name_val:"user_apartment_number",required_val:i.config.config_is_apartment_number_required>0,type_val:"text",minlength_val:1,maxlength_val:7}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_postcode_active)?((0,_.wg)(),(0,_.j4)(o,{key:7,input_value:{placeholder:"Почтовый индекс",name_val:"user_postindex",required_val:i.config.config_is_postcode_required>0,type_val:"number",minlength_val:1,maxlength_val:25}},null,8,["input_value"])):(0,_.kq)("",!0),n.isVisibleInput(i.config.config_is_comment_active)?((0,_.wg)(),(0,_.j4)(l,{key:8,input_value:{name_val:"user_comment",placeholder:"Комментарий",required_val:i.config.config_is_comment_required>0,minlength_val:1,maxlength_val:2e3}},null,8,["input_value"])):(0,_.kq)("",!0)])):(0,_.kq)("",!0)}const rt={class:"sb-basket__text-input-wrapper"},lt=["value","name","type","placeholder","maxlength","minlength"],ut={class:"sb-basket__error-msgs"};function ct(t,e,i,a,o,r){return(0,_.wg)(),(0,_.iD)("div",rt,[(0,_.wy)((0,_._)("input",{value:o.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),name:o.name_val,type:o.type_val,placeholder:o.placeholder_val,maxlength:o.maxlength_val,minlength:o.minlength_val,class:"sb-basket__text-input",onBlur:e[1]||(e[1]=t=>r.validInput(o.value)),onFocus:e[2]||(e[2]=t=>o.error="")},null,40,lt),[[s.YZ,o.value]]),(0,_._)("span",ut,(0,n.zw)(o.error),1)])}var dt={props:{input_value:Object},data(){return{maxlength_val:this.input_value.maxlength_val,minlength_val:this.input_value.minlength_val,placeholder_val:this.input_value.required_val?this.input_value.placeholder+" *":this.input_value.placeholder,required_val:this.input_value.required_val,type_val:this.input_value.type_val,name_val:this.input_value.name_val,value:"",error:""}},methods:{validInput(t){if(this.required_val&&t.length<1||t.length&&t.length<this.minlength_val)return this.error="Заполните корректно поле",!1;if("email"==this.type_val){if(/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu.test(t))return this.error="",!0;if(t.length)return this.error="Не корректный email",!1}}}};const pt=(0,st.Z)(dt,[["render",ct]]);var mt=pt;const bt={class:"sb-basket__text-input-wrapper"},vt=["value","name","placeholder","minlength"],ht={class:"sb-basket__error-msgs"};function gt(t,e,i,a,o,r){const l=(0,_.Q2)("imask");return(0,_.wg)(),(0,_.iD)("div",bt,[(0,_.wy)((0,_._)("input",{type:"text",value:o.value,name:o.name_val,onAccept:e[0]||(e[0]=(...t)=>r.onAccept&&r.onAccept(...t)),placeholder:o.placeholder_val,onComplete:e[1]||(e[1]=(...t)=>r.onComplete&&r.onComplete(...t)),minlength:o.minlength_val,class:"sb-basket__text-input",onBlur:e[2]||(e[2]=t=>r.validInput(o.value)),onFocus:e[3]||(e[3]=t=>o.error="")},null,40,vt),[[l,o.mask]]),(0,_.wy)((0,_._)("input",{type:"hidden",name:"user_tel_valid","onUpdate:modelValue":e[4]||(e[4]=t=>o.input_valid=t)},null,512),[[s.nr,o.input_valid]]),(0,_._)("span",ht,(0,n.zw)(o.error),1)])}var Tt=i(8877),kt={props:{input_value:Object},data(){return{minlength_val:this.input_value.minlength_val,placeholder_val:this.input_value.required_val?this.input_value.placeholder+" *":this.input_value.placeholder,required_val:this.input_value.required_val,name_val:this.input_value.name_val,value:"",mask:{mask:"{"+this.input_value.mask+"}(000) 000-00-00",lazy:!0},error:"",input_valid:!0}},methods:{validInput(t){if(this.required_val&&t.length<1||t.length&&t.length<this.minlength_val)return this.error="Заполните корректно поле",!1},onAccept(t){const e=t.detail;this.value=e.value,this.input_valid=!1,console.log("accept",e.value)},onComplete(t){const e=t.detail;this.input_valid=!0,console.log("complete",e.unmaskedValue)}},directives:{imask:Tt.An}};const ft=(0,st.Z)(kt,[["render",gt]]);var yt=ft;const At={class:"sb-basket__textarea-wrapper"},Et=["value","name","placeholder","maxlength","minlength"],wt={class:"sb-basket__error-msgs"};function qt(t,e,i,a,o,r){return(0,_.wg)(),(0,_.iD)("div",At,[(0,_.wy)((0,_._)("textarea",{value:o.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),name:o.name_val,placeholder:o.placeholder_val,maxlength:o.maxlength_val,minlength:o.minlength_val,class:"sb-basket__textarea",onBlur:e[1]||(e[1]=t=>r.validTextarea()),onFocus:e[2]||(e[2]=t=>o.error="")},null,40,Et),[[s.nr,o.value]]),(0,_._)("span",wt,(0,n.zw)(o.error),1)])}var Dt={props:{input_value:Object},data(){return{maxlength_val:this.input_value.maxlength_val,minlength_val:this.input_value.minlength_val,placeholder_val:this.input_value.required_val?this.input_value.placeholder+" *":this.input_value.placeholder,required_val:this.input_value.required_val,type_val:this.input_value.type_val,name_val:this.input_value.name_val,value:"",error:""}},methods:{validTextarea(){if(this.required_val&&this.value.length<Number(this.minlength_val))return this.error="Заполните корректно поле",!1}}};const St=(0,st.Z)(Dt,[["render",qt]]);var It=St,Nt={props:{config:Object},components:{TextInput:mt,TelInput:yt,TextArea:It},data(){return{}},computed:{...(0,S.Se)(["GET_CONFIG_LIST_DATA"])},methods:{isVisibleInput(t){return t>0}}};const Ct=(0,st.Z)(Nt,[["render",ot]]);var Ot=Ct;const Gt={class:"sb-loader"};function xt(t,e,i,s,a,n){return(0,_.wg)(),(0,_.iD)("div",Gt)}var Lt={props:{text:String},data(){return{}}};const Bt=(0,st.Z)(Lt,[["render",xt]]);var Kt=Bt,Ft={components:{MinBasketProductInputs:at,MinBasketContactInputs:Ot,LoaderDots:Kt},data(){return{is_form_visible:!1,is_form_valid:!0,is_loader_visible:!1,is_checkout_disable:!1}},computed:{...(0,S.Se)(["GET_BASKET_DATA","GET_CONFIG_LIST_DATA","GET_BASKET_CONDITION"]),total_quantity(){let t=0,e=this.GET_BASKET_DATA;for(let i=0;i<e.length;i++)t+=Math.floor(e[i].product_quantity);return t},total_price(){let t=0,e=this.GET_BASKET_DATA;for(let i=0;i<e.length;i++)t+=Math.floor(e[i].product_quantity*e[i].product_price*100)/100;return Math.floor(100*t)/100}},methods:{clear_button(){this.$store.commit("SET_BASKET_DATA",[]),localStorage.setItem("sb_ls",[])},close_sb_basket(){this.$store.commit("CHANGE_BASKET_CONDITION"),this.is_form_visible=!1,document.body.classList.remove("hidden")},validInputs(t){let e=this.GET_CONFIG_LIST_DATA;for(var i of t.entries()){if(Number(e.config_is_name_required)&&"user_name"==i[0]&&""==i[1]||Number(e.config_is_tel_required)&&"user_tel"==i[0]&&""==i[1]||Number(e.config_is_email_required)&&"user_mail"==i[0]&&""==i[1]||Number(e.config_is_street_required)&&"user_street"==i[0]&&""==i[1]||Number(e.config_is_city_required)&&"user_city"==i[0]&&""==i[1]||Number(e.config_is_house_number_required)&&"user_house_number"==i[0]&&""==i[1]||Number(e.config_is_apartment_number_required)&&"user_apartment_number"==i[0]&&""==i[1]||Number(e.config_is_postcode_required)&&"user_postindex"==i[0]&&""==i[1]||Number(e.config_is_comment_required)&&"user_comment"==i[0]&&""==i[1])return console.log("Заполните все обязательные поля"),this.is_form_valid=!1,this.$store.commit("SET_ALERT_CONTENT",{title:"",description:"Заполните все обязательные поля, помеченные звездочкой",status:"error",button_text_1:"ОК",button_text_2:"",is_open:!0}),document.body.classList.add("hidden"),!1;this.is_form_valid=!0}},submit(){let t=new FormData(this.$refs.sb_basket_form);this.validInputs(t),this.is_form_valid&&(this.is_loader_visible=!0,this.is_checkout_disable=!0,(0,D.ZP)({url:"/admin/send_basket_data/front/send_basket.php",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t}).then((t=>{console.log(t),this.is_loader_visible=!1,this.is_checkout_disable=!1,"success"==t.data&&(this.close_sb_basket(),this.clear_button(),this.$store.commit("SET_ALERT_CONTENT",{title:"",description:"Заказ успешно оформлен. Ожидайте звонка менеджера",status:"success",button_text_1:"OK",button_text_2:"",is_open:!0}),document.body.classList.add("hidden")),"NOTCONFIGSENDMAIL"==t.data&&(this.$store.commit("SET_ALERT_CONTENT",{title:"Возникла ошибка",description:"Свяжитесь с нами по телефону, указанному в контактах",status:"error",button_text_1:"OK",button_text_2:"",is_open:!0}),document.body.classList.add("hidden"),this.is_checkout_disable=!1)})))}},beforeMount(){let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`),window.addEventListener("resize",(()=>{let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}))}};const Mt=(0,st.Z)(Ft,[["render",q]]);var Rt=Mt;const zt={key:0,class:"sb-alert__icon"},jt=(0,_.uE)('<div class="swal2-icon swal2-success swal2-icon-show" style="display:flex;"><div class="swal2-success-circular-line-left" style="background-color:rgb(255, 255, 255);"></div><span class="swal2-success-line-tip"></span><span class="swal2-success-line-long"></span><div class="swal2-success-ring"></div><div class="swal2-success-fix" style="background-color:rgb(255, 255, 255);"></div><div class="swal2-success-circular-line-right" style="background-color:rgb(255, 255, 255);"></div></div>',1),$t=[jt],Vt={key:1,class:"sb-alert__icon"},Pt=(0,_._)("div",{class:"swal2-icon swal2-error swal2-icon-show",style:{display:"flex"}},[(0,_._)("span",{class:"swal2-x-mark"},[(0,_._)("span",{class:"swal2-x-mark-line-left"}),(0,_._)("span",{class:"swal2-x-mark-line-right"})])],-1),Zt=[Pt],Ut={key:2,class:"sb-alert__icon"},Ht=(0,_._)("div",{class:"swal2-icon swal2-info swal2-icon-show",style:{display:"flex"}},[(0,_._)("div",{class:"swal2-icon-content"},"i")],-1),Jt=[Ht],Wt={key:3,class:"sb-alert__icon"},Yt=(0,_._)("div",{class:"swal2-icon swal2-warning swal2-icon-show",style:{display:"flex"}},[(0,_._)("div",{class:"swal2-icon-content"},"!")],-1),Qt=[Yt],Xt={class:"sb-alert__title"},te={class:"sb-alert__description"},ee={class:"sb-alert__buttons"};function ie(t,e,i,a,o,r){return t.GET_ALERT_CONTENT.is_open?((0,_.wg)(),(0,_.iD)("div",{key:0,id:"sb-alert",class:(0,n.C_)(["sb-alert","sb-alert_"+t.GET_ALERT_CONTENT.status]),onClick:e[2]||(e[2]=(0,s.iM)(((...t)=>r.close_alert&&r.close_alert(...t)),["self"]))},[(0,_._)("div",{class:(0,n.C_)(["sb-alert__inner","sb-alert__inner_"+t.GET_ALERT_CONTENT.status])},["success"==t.GET_ALERT_CONTENT.status?((0,_.wg)(),(0,_.iD)("div",zt,$t)):(0,_.kq)("",!0),"error"==t.GET_ALERT_CONTENT.status?((0,_.wg)(),(0,_.iD)("div",Vt,Zt)):(0,_.kq)("",!0),"info"==t.GET_ALERT_CONTENT.status?((0,_.wg)(),(0,_.iD)("div",Ut,Jt)):(0,_.kq)("",!0),"warning"==t.GET_ALERT_CONTENT.status?((0,_.wg)(),(0,_.iD)("div",Wt,Qt)):(0,_.kq)("",!0),(0,_._)("div",Xt,(0,n.zw)(t.GET_ALERT_CONTENT.title),1),(0,_._)("div",te,(0,n.zw)(t.GET_ALERT_CONTENT.description),1),(0,_._)("div",ee,[t.GET_ALERT_CONTENT.button_text_1?((0,_.wg)(),(0,_.iD)("button",{key:0,class:"sb-alert__button",onClick:e[0]||(e[0]=t=>r.close_alert())},(0,n.zw)(t.GET_ALERT_CONTENT.button_text_1),1)):(0,_.kq)("",!0),t.GET_ALERT_CONTENT.button_text_2?((0,_.wg)(),(0,_.iD)("button",{key:1,class:"sb-alert__button",onClick:e[1]||(e[1]=t=>r.open_basket())},(0,n.zw)(t.GET_ALERT_CONTENT.button_text_2),1)):(0,_.kq)("",!0)])],2)],2)):(0,_.kq)("",!0)}var se={data(){return{}},computed:{...(0,S.Se)(["GET_ALERT_CONTENT"])},methods:{close_alert(){this.$store.commit("SET_ALERT_CONTENT",{title:"",description:"",status:"",button_text_1:"",button_text_2:"",is_open:!1}),document.body.classList.remove("hidden")},open_basket(){this.$store.commit("CHANGE_BASKET_CONDITION"),this.close_alert(),document.body.classList.add("hidden")}}};const _e=(0,st.Z)(se,[["render",ie]]);var ae=_e,ne={components:{MainBasket:Rt,AppAlert:ae},beforeCreate(){null!==localStorage.getItem("sb_ls")&&this.$store.commit("SET_BASKET_DATA",JSON.parse(localStorage.getItem("sb_ls")))}};const oe=(0,st.Z)(ne,[["render",a]]);var re=oe;const le={class:"sb-basket-button__item"},ue={key:0};function ce(t,e,i,s,a,o){return(0,_.wg)(),(0,_.iD)("button",{class:"sb-basket-button",onClick:e[0]||(e[0]=t=>o.open_basket())},[(0,_._)("div",le,[(0,_.Uk)(" Корзина "),o.total_quantity>0?((0,_.wg)(),(0,_.iD)("span",ue,(0,n.zw)(o.total_quantity),1)):(0,_.kq)("",!0)])])}var de={computed:{...(0,S.Se)(["GET_BASKET_DATA"]),total_quantity(){let t=0,e=this.GET_BASKET_DATA;for(let i=0;i<e.length;i++)t+=Math.floor(e[i].product_quantity);return t}},methods:{open_basket(){this.$store.commit("CHANGE_BASKET_CONDITION"),document.body.classList.add("hidden")}}};const pe=(0,st.Z)(de,[["render",ce]]);var me=pe,be=i(2483);const ve={key:0,class:"sb-catalog__inner"},he={class:"sb-catalog__list"};function ge(t,e,i,s,a,n){const o=(0,_.up)("catalog-list-item");return t.GET_PRODUCT_LIST_DATA.length&&void 0!=t.GET_CONFIG_LIST_DATA?((0,_.wg)(),(0,_.iD)("div",ve,[(0,_._)("div",he,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(t.GET_PRODUCT_LIST_DATA,(t=>((0,_.wg)(),(0,_.j4)(o,{key:t.product_quantity,product:t},null,8,["product"])))),128))])])):(0,_.kq)("",!0)}var Te=i.p+"admin/img/basket.a1f4491e.svg";const ke={key:0,class:"sb-catalog__item sb-catalog__item_4"},fe={class:"sb-catalog__item-content"},ye={class:"sb-catalog__item-img-wrapper"},Ae=["src","alt"],Ee={class:"sb-catalog__item-name"},we={class:"sb-catalog__footer"},qe={class:"sb-catalog__item-price"},De={class:"sb-catalog__price"},Se={class:"sb-catalog__price-number"},Ie={class:"sb-catalog__price-currency"},Ne={key:0,class:"sb-catalog__price-old"},Ce={class:"sb-catalog__price-old-number"},Oe={class:"sb-catalog__price-old-currency"},Ge=(0,_._)("img",{height:"15",src:Te,alt:"В корзину",title:"Добавить в корзину"},null,-1),xe=(0,_._)("span",null,"В корзине",-1),Le=[Ge,xe],Be=(0,_._)("img",{height:"15",src:Te,alt:"В корзину",title:"Добавить в корзину"},null,-1),Ke=(0,_._)("span",null,"В корзину",-1),Fe=[Be,Ke];function Me(t,e,i,s,a,o){const r=(0,_.up)("quantity-fake-input");return i.product.product_is_active>0?((0,_.wg)(),(0,_.iD)("div",ke,[(0,_._)("div",fe,[(0,_._)("div",ye,[(0,_._)("img",{src:i.product.product_img,alt:i.product.product_name},null,8,Ae)]),(0,_._)("div",Ee,(0,n.zw)(i.product.product_name),1)]),(0,_._)("div",we,[(0,_._)("div",qe,[(0,_._)("div",De,[(0,_._)("span",Se,(0,n.zw)(a.product_price),1),(0,_._)("span",Ie,(0,n.zw)(t.GET_CONFIG_LIST_DATA.config_currency),1)]),a.product_price_old?((0,_.wg)(),(0,_.iD)("div",Ne,[(0,_._)("span",Ce,(0,n.zw)(a.product_price_old),1),(0,_._)("span",Oe,(0,n.zw)(t.GET_CONFIG_LIST_DATA.config_currency),1)])):(0,_.kq)("",!0)]),o.is_in_basket?(0,_.kq)("",!0):((0,_.wg)(),(0,_.j4)(r,{product:i.product,key:i.product.product_basket_id},null,8,["product"])),o.is_in_basket||0!=i.product.product_is_quantity?(0,_.kq)("",!0):((0,_.wg)(),(0,_.iD)("button",{key:1,class:"sb-catalog__item-button",onClick:e[0]||(e[0]=t=>o.addToBasket())},Le)),o.is_in_basket?((0,_.wg)(),(0,_.iD)("button",{key:2,class:"sb-catalog__item-button",onClick:e[1]||(e[1]=t=>o.addToBasket())},Fe)):(0,_.kq)("",!0)])])):(0,_.kq)("",!0)}i(7658);const Re={key:0,class:"sb-catalog__quantity-input"},ze=(0,_._)("img",{width:"16",height:"16",src:N,alt:"Уменьшить количество"},null,-1),je=[ze],$e={class:"sb-catalog__quantity-number"},Ve=(0,_._)("img",{width:"16",height:"16",src:N,alt:"Уменьшить количество"},null,-1),Pe=[Ve];function Ze(t,e,i,s,a,o){return i.product.product_is_quantity>0?((0,_.wg)(),(0,_.iD)("div",Re,[(0,_._)("button",{class:"sb-catalog__quantity-button sb-catalog__quantity-button_minus",onClick:e[0]||(e[0]=t=>o.change_quantity("-"))},je),(0,_._)("span",$e,(0,n.zw)(o.basketDataItem),1),(0,_._)("button",{class:"sb-catalog__quantity-button sb-catalog__quantity-button_plus",onClick:e[1]||(e[1]=t=>o.change_quantity("+"))},Pe)])):(0,_.kq)("",!0)}var Ue={props:{product:Object},data(){return{quantity:1}},computed:{...(0,S.Se)(["GET_BASKET_DATA"]),basketDataItem(){let t=this.GET_BASKET_DATA,e=t.find((t=>t.product_id==this.product.product_id));return Number(e?e.product_quantity:1)}},methods:{change_quantity(t){if(console.log(this.basketDataItem),"-"==t&&1==this.basketDataItem)return console.log("del"),this.delete_product_from_basket(this.product.product_id),!1;"+"==t&&(this.quantity=Number(this.basketDataItem)+1,console.log(this.quantity)),"-"==t&&this.basketDataItem>1&&(this.quantity=this.basketDataItem-1);let e=this.GET_BASKET_DATA,i=e.filter((t=>t.product_id!==this.product.product_id)),s=this.product;s.product_basket_id=this.product.product_id+"_"+Math.random(1e3),s.product_quantity=this.quantity,this.product_price=Math.floor(this.product.product_price*s.product_quantity*100)/100,this.product_price_old=Math.floor(this.product.product_price_old*s.product_quantity*100)/100,i.push(s),this.$store.commit("SET_BASKET_DATA",i),localStorage.setItem("sb_ls",JSON.stringify(i))},delete_product_from_basket(t){let e=this.GET_BASKET_DATA,i=e.filter((e=>e.product_id!==t));console.log("del "+t),console.log(i),this.$store.commit("SET_BASKET_DATA",i),localStorage.setItem("sb_ls",JSON.stringify(i))}},beforeMount(){console.log("updated"),this.GET_BASKET_DATA[this.product.product_id]&&(this.quantity=this.GET_BASKET_DATA[this.product.product_id].product_quantity)}};const He=(0,st.Z)(Ue,[["render",Ze]]);var Je=He,We={props:{product:Object},components:{QuantityFakeInput:Je},data(){return{product_price:Math.floor(100*this.product.product_price)/100,product_price_old:Math.floor(100*this.product.product_price_old)/100}},computed:{...(0,S.Se)(["GET_BASKET_DATA","GET_CONFIG_LIST_DATA"]),is_in_basket(){let t=this.GET_BASKET_DATA;var e=t.some((t=>t.product_id==this.product.product_id));return!e}},methods:{addToBasket(){let t=this.GET_BASKET_DATA;var e=t.some((t=>t.product_id==this.product.product_id));if(e){let e=t.filter((t=>t.product_id!==this.product.product_id)),i=this.product;return i.product_quantity=1,i.product_basket_id=this.product.product_id+"_"+Math.random(1e3),i.offer={basket_offer_id:""},e.push(i),this.$store.commit("SET_BASKET_DATA",e),localStorage.setItem("sb_ls",JSON.stringify(e)),console.log("Такой товар уже есть в корзине"),!1}{let e=this.product;e.product_quantity=1,e.product_basket_id=this.product.product_id+"_"+Math.random(1e3),t.push(e),this.$store.commit("SET_BASKET_DATA",t),localStorage.setItem("sb_ls",JSON.stringify(t)),this.$store.commit("SET_ALERT_CONTENT",{title:"",description:"Товар добавлен в корзину",status:"success",button_text_1:"Продолжить",button_text_2:"В корзину",is_open:!0}),document.body.classList.add("hidden")}}}};const Ye=(0,st.Z)(We,[["render",Me]]);var Qe=Ye,Xe={name:"CatalogView",components:{CatalogListItem:Qe},computed:{...(0,S.Se)(["GET_PRODUCT_LIST_DATA","GET_CONFIG_LIST_DATA","GET_BASKET_DATA"])},beforeCreate(){this.$store.dispatch("PRODUCT_LIST_ACTION"),this.$store.dispatch("CONFIG_LIST_ACTION")}};const ti=(0,st.Z)(Xe,[["render",ge]]);var ei=ti;const ii=[{path:"/",name:"catalog",component:ei}],si=(0,be.p7)({history:(0,be.PO)("/"),routes:ii});var _i=si,ai=(0,S.MT)({state:{product_list:"",basket_data:[],config_list:"",is_open_basket:!1,alert_content:{title:"",description:"",status:"",button_text_1:"",button_text_2:"",is_open:!1}},getters:{GET_PRODUCT_LIST_DATA:t=>t.product_list,GET_CONFIG_LIST_DATA:t=>t.config_list[0],GET_BASKET_DATA:t=>t.basket_data,GET_BASKET_CONDITION:t=>t.is_open_basket,GET_ALERT_CONTENT:t=>t.alert_content},mutations:{SET_PRODUCT_LIST_DATA:(t,e)=>{t.product_list=e},SET_CONFIG_LIST_DATA:(t,e)=>{t.config_list=e},SET_BASKET_DATA:(t,e)=>{t.basket_data=e},CHANGE_BASKET_CONDITION:t=>t.is_open_basket=!t.is_open_basket,SET_ALERT_CONTENT:(t,e)=>{t.alert_content.title=e.title,t.alert_content.description=e.description,t.alert_content.status=e.status,t.alert_content.button_text_1=e.button_text_1,t.alert_content.button_text_2=e.button_text_2,t.alert_content.is_open=e.is_open}},actions:{PRODUCT_LIST_ACTION:async t=>{let{data:e}=await D.ZP.post("/admin/product/front/get_product_list.php");t.commit("SET_PRODUCT_LIST_DATA",e)},CONFIG_LIST_ACTION:async t=>{let{data:e}=await D.ZP.post("/admin/config/front/get_config_frontend.php");t.commit("SET_CONFIG_LIST_DATA",e)}},modules:{}});(0,s.ri)(re).use(ai).use(_i).mount("#sb-catalog"),(0,s.ri)(me).use(ai).mount("#sb-basket-button-wrapper")}},e={};function i(s){var _=e[s];if(void 0!==_)return _.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,_,a){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],_=t[u][1],a=t[u][2];for(var o=!0,r=0;r<s.length;r++)(!1&a||n>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[r])}))?s.splice(r--,1):(o=!1,a<n&&(n=a));if(o){t.splice(u--,1);var l=_();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,_,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var _,a,n=s[0],o=s[1],r=s[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(_ in o)i.o(o,_)&&(i.m[_]=o[_]);if(r)var u=r(i)}for(e&&e(s);l<n.length;l++)a=n[l],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(u)},s=self["webpackChunksmartbasket"]=self["webpackChunksmartbasket"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(1536)}));s=i.O(s)})();
//# sourceMappingURL=app.f3605060.js.map